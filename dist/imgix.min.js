(function(){function c(r,a,u){function o(i,t){if(!a[i]){if(!r[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(l)return l(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var n=a[i]={exports:{}};r[i][0].call(n.exports,function(t){var e=r[i][1][t];return o(e||t)},n,n.exports,c,r,a,u)}return a[i].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)o(u[t]);return o}return c})()({1:[function(t,e,i){var u=t("./util.js"),s=t("./targetWidths.js"),n=t("./autoSize");var r=function(){function t(t,e){this.el=t;this.settings=e||{};if(!this.el){console.warn("ImgixTag must be passed a DOM element.");return}this.window=this.settings.window?this.settings.window:null;if(this.el.hasAttribute("ix-initialized")&&!this.settings.force){return}this.ixPathVal=t.getAttribute(this.settings.pathInputAttribute);this.ixParamsVal=t.getAttribute(this.settings.paramsInputAttribute);this.ixSrcVal=t.getAttribute(this.settings.srcInputAttribute);this.ixHostVal=t.getAttribute(this.settings.hostInputAttribute)||this.settings.host;if(this.ixPathVal&&!this.ixHostVal){console.warn("You must set a value for `imgix.config.host` or specify an `ix-host` attribute to use `ix-path` and `ix-params`.");return}if(typeof this.ixPathVal==="string"&&this.ixPathVal.length==0){console.warn('`ix-path` cannot accept a value of empty string ""');return}if(typeof this.ixSrcVal==="string"&&this.ixSrcVal.length==0){console.warn('`ix-src` cannot accept a value of empty string ""');return}this.baseParams=this._extractBaseParams();this.baseUrl=this._buildBaseUrl();this.baseUrlWithoutQuery=this.baseUrl.split("?")[0];if(u.isString(this.settings.sizesAttribute)){this.el.setAttribute(this.settings.sizesAttribute,this.sizes())}if(u.isString(this.settings.srcsetAttribute)){this.el.setAttribute(this.settings.srcsetAttribute,this.srcset())}if(u.isString(this.settings.srcAttribute)&&this.el.nodeName=="IMG"){this.el.setAttribute(this.settings.srcAttribute,this.src())}this.el.setAttribute("ix-initialized","ix-initialized")}t.prototype._extractBaseParams=function(){var t={};if(this.settings.defaultParams&&typeof this.settings.defaultParams==="object"&&this.settings.defaultParams!==null){t=Object.assign({},this.settings.defaultParams)}if(this.ixPathVal){t=Object.assign({},t,JSON.parse(this.ixParamsVal)||{});for(var e in t){if(e.substr(-2)==="64"){t[e]=u.encode64(t[e])}}}else{var i=this.ixSrcVal.lastIndexOf("?");if(i>-1){var s=this.ixSrcVal.substr(i+1),n=s.split("&");for(var r=0,a;r<n.length;r++){a=n[r].split("=");t[a[0]]=a[1]}}}if(this.settings.includeLibraryParam){t.ixlib="imgixjs-"+imgix.VERSION}return t};t.prototype._buildBaseUrl=function(){if(this.ixSrcVal){return this.ixSrcVal}var t=this.ixPathVal,e=this.settings.useHttps?"https":"http",i=e+"://"+this.ixHostVal,s=this.ixHostVal.substr(-1)==="/",n=t[0]==="/";if(s&&n){i+=t.substr(1)}else if(!s&&!n){i+="/"+t}else{i+=t}i+="?";var r=[],a;for(var u in this.baseParams){a=this.baseParams[u];if(a==null){continue}r.push(encodeURIComponent(u)+"="+encodeURIComponent(a))}i+=r.join("&");return i};t.prototype._buildSrcsetPair=function(t){var e=u.shallowClone(this.baseParams);e.w=t;if(this.baseParams.w!=null&&this.baseParams.h!=null){e.h=Math.round(t*(this.baseParams.h/this.baseParams.w))}var i=this.baseUrlWithoutQuery+"?",s,n=[];for(var r in e){s=e[r];n.push(r+"="+s)}i+=n.join("&");return i+" "+t+"w"};t.prototype.src=function(){return this.baseUrl};t.prototype.srcset=function(){var t=[];for(var e=0;e<s.length;e++){t.push(this._buildSrcsetPair(s[e]))}return t.join(", ")};t.prototype.sizes=function(){var t=this.el.getAttribute("sizes");const e=this.el;const i=this.window;if(t&&t!=="auto"){return t}else if(t==="auto"){return n.updateOnResize({el:e,existingSizes:t,_window:i})}else{return"100vw"}};return t}();e.exports=r},{"./autoSize":2,"./targetWidths.js":5,"./util.js":6}],2:[function(t,e,i){const n=t("./util");const s=40;const r=200;const a=1;const u=function({parent:t,width:e}){let i=t.offsetWidth;while(t.parentNode&&i<s){i=t.parentNode.offsetWidth;t=t.parentNode}if(e<i){e=i}if(e<s){e=s}return e};const o=({el:t})=>{if(!t.complete){console.warn("Imgix.js: attempted to set sizes attribute on element with complete evaluating to false");return false}if(t.naturalWidth===0){console.warn("Imgix.js: attempted to set sizes attribute on element with no naturalWidth");return false}return true};const l=({el:t,existingSizes:e})=>{if(!e){console.warn("Imgix.js: attempted to set sizes attribute on element without existing sizes attribute value");return false}if(!t.hasAttributes()){console.warn("Imgix.js: attempted to set sizes attribute on element with no attributes");return false}return o({el:t})};const c=({el:t,existingSizes:e})=>{let i=l({el:t,existingSizes:e})?u({el:t,parent:t.parentNode,width:t.offsetWidth})+"px":e;return i};const f=({el:t,existingSizes:e,_window:i})=>{const s=c({el:t,existingSizes:e});if(s!==e){i.requestAnimationFrame(()=>{t.setAttribute("sizes",s)})}};const h=({state:t,_window:e})=>{if(t.isRequestIdleCallbackScheduled)return;t.isRequestIdleCallbackScheduled=true;e.requestIdleCallback(d,{timeout:r})};const d=({deadline:t,state:e,_window:i})=>{e.isRequestIdleCallbackScheduled=false;if(typeof t==="undefined"){t={timeRemaining:function(){return a}}}while(t.timeRemaining()>0&&e.queue.length>0){let t=e.queue.pop();t()}if(e.queue.length>0)h({state:e,_window:i})};const p=({el:t,existingSizes:e,_window:s})=>{s.requestIdleCallback=n.rICShim(s);s.cancelIdleCallback=n.cICShim(s);s.addEventListener("resize",()=>{s.requestIdleCallbackQueue=s.requestIdleCallbackQueue?s.requestIdleCallbackQueue:[];const i=s.requestIdleCallbackQueue;i.push(()=>f({el:t,existingSizes:e,_window:s}));s.requestIdleCallback(t=>{const e={isRequestIdleCallbackScheduled:true,queue:i};d({deadline:t,state:e})},{timeout:r})},false);return u({el:t,parent:t.parentNode,width:t.offsetWidth})+"px"};const g={getElementWidth:u,imgCanBeSized:l,updateOnResize:p};e.exports=g},{"./util":6}],3:[function(t,e,i){e.exports={host:null,useHttps:true,includeLibraryParam:true,defaultParams:{},srcAttribute:"src",srcsetAttribute:"srcset",sizesAttribute:"sizes",srcInputAttribute:"ix-src",pathInputAttribute:"ix-path",paramsInputAttribute:"ix-params",hostInputAttribute:"ix-host",window:typeof window!=="undefined"?window:null}},{}],4:[function(e,t,i){(function(r){(function(){var a=e("./ImgixTag.js"),u=e("./util.js"),n=e("./defaultConfig");var t="3.4.2";r.imgix={init:function(t){var e=u.shallowClone(this.config);u.extend(e,t||{});var i=["img["+e.srcInputAttribute+"]","source["+e.srcInputAttribute+"]","img["+e.pathInputAttribute+"]","source["+e.pathInputAttribute+"]"].join(",");var s=document.querySelectorAll(i);for(var n=0,r;n<s.length;n++){new a(s[n],e)}},config:n,VERSION:t};u.domReady(function(){u.objectEach(n,function(t,e){var i=u.getMetaTagValue(e);if(typeof i!=="undefined"){var s=typeof n[e];if(s==="boolean"){r.imgix.config[e]=!!i}else if(s==="object"&&n[e]!=null){r.imgix.config[e]=JSON.parse(i)||{}}else{r.imgix.config[e]=i}}});if(u.getMetaTagValue("autoInit")!==false){r.imgix.init()}})}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./ImgixTag.js":1,"./defaultConfig":3,"./util.js":6}],5:[function(t,e,i){function s(){var t=[];var e=100;var i=8;var s=8192;function n(t){return 2*Math.round(t/2)}while(e<=s){t.push(n(e));e*=1+i/100*2}return t}e.exports=s()},{}],6:[function(t,e,i){e.exports={compact:function(t){var e=[];for(var i=0;i<t.length;i++){t[i]&&e.push(t[i])}return e},shallowClone:function(t){var e={};for(var i in t){e[i]=t[i]}return e},extend:function(t,e){for(var i in e){t[i]=e[i]}return t},uniq:function(t){var e={},i=[],s;for(s=0;s<t.length;s++){if(!e[t[s]]){e[t[s]]=true;i.push(t[s])}}return i},objectEach:function(t,e){for(var i in t){if(t.hasOwnProperty(i)){e(t[i],i)}}},isString:function(t){return typeof t==="string"},encode64:function(t){var e=unescape(encodeURIComponent(t)),i=btoa(e),s=i.replace(/\+/g,"-");s=s.replace(/\//g,"_").replace(/\//g,"_").replace(/\=+$/,"");return s},decode64:function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/"),i=atob(e),s=decodeURIComponent(escape(i));return s},domReady:function(t){if(document.readyState==="complete"){setTimeout(t,0)}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",t,false)}else{document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){t()}})}},getMetaTagValue:function(t){var e=document.querySelector('meta[property="ix:'+t+'"]'),i;if(!e){return}i=e.getAttribute("content");if(i==="true"){return true}else if(i==="false"){return false}else if(i===""||i==="null"){return null}else{return i}},rICShim:function(t){return t.requestIdleCallback||function(t){var e=Date.now();return setTimeout(function(){t({didTimeout:false,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)}},cICShim:function(t){return t.cancelIdleCallback||function(t){clearTimeout(t)}}}},{}]},{},[4]);
